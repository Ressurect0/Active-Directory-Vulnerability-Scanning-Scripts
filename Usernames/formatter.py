#!/usr/bin/python3

import argparse
import os

class bcolors:
    HEADER = '\033[95m'
    OKBLUE = '\033[94m'
    OKCYAN = '\033[96m'
    OKGREEN = '\033[92m'
    WARNING = '\033[93m'
    FAIL = '\033[91m'
    ENDC = '\033[0m'
    BOLD = '\033[1m'
    UNDERLINE = '\033[4m'

parser = argparse.ArgumentParser(description='Program that helps to format firstname and lastname in separate files to a single file which can be provided as input to the "username-anarchy" tool.')
parser.add_argument("-f","--firstname",help="Path to file containing first names")
parser.add_argument("-l","--lastname",help="Path to file containing last names")

args = parser.parse_args()

# Reading files
temp = open(os.path.abspath(args.firstname),'r')
file1=[]
for line in temp:
    temp2=line.rstrip("\n")
    if temp2 != '':
        file1.append(temp2)
        
temp = open(os.path.abspath(args.lastname),'r')
file2=[]
for line in temp:
    temp2=line.rstrip("\n")
    if temp2 != '':
        file2.append(temp2)

# Combining output
csv=[]
csv.append("firstname,lastname")

for f in file1:
    for l in file2:
        temp=f+","+l
        csv.append(temp)

print("\n")
print(bcolors.OKGREEN + "Total names generated:" + bcolors.ENDC,len(csv))

wr=open("formatter-op","w")
for e in csv:
    wr.write(e+"\n")

path=str(os.getcwd())+"/formatter-op"

print(bcolors.OKCYAN + "File written at:" + bcolors.ENDC,path)